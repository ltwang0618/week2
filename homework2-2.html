<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charse="utf-8" />
        <title>week2 task2</title>
    </head>
    <body>
        <script>
            function calculate_sum_of_bonus(data) {
                let allSalary = 0;
                let roleBonus = 0;
                let baseBonus = 0;
                let performanceBonus = 0;
                let calSum = 0;

                for (const object of data["employees"]) {
                    const defSalary = String(object["salary"]);
                    let Salary1 = 0;
                    let Salary2 = 0;
                    let Salary3 = 0;

                    if (defSalary.includes("USD")) {
                        Salary1 = parseInt(defSalary.replace("USD", "")) * 30;
                    } else if (defSalary.includes(",")) {
                        Salary2 = parseInt(defSalary.replace(",", ""));
                    } else {
                        Salary3 = parseInt(defSalary);
                    }

                    allSalary = (Salary1 + Salary2 + Salary3) * 0.02;
                    baseBonus += allSalary;

                    if (object["performance"] === "above average") {
                        calSum = 2000;
                        performanceBonus += calSum;
                    } else if (object["performance"] === "average") {
                        calSum = 1000;
                        performanceBonus += calSum;
                    } else if (object["performance"] === "below average") {
                        calSum = 600;
                        performanceBonus += calSum;
                    }

                    if (object["role"] === "Engineer") {
                        roleBonus = baseBonus * 0.8;
                    } else if (object["role"] === "CEO") {
                        roleBonus = baseBonus * 1;
                    } else if (object["role"] === "Sales") {
                        roleBonus = baseBonus * 0.4;
                    }
                }

                const totalBonus = baseBonus + roleBonus + performanceBonus;
                console.log("Total bonus of all employees:", totalBonus, "TWD");
            }
            calculate_sum_of_bonus({
                "employees":[
                    {
                        "name":"John",
                        "salary":"1000USD",
                        "performance":"above average",
                        "role":"Engineer"
                    },
                    {
                        "name":"Bob",
                        "salary":60000,
                        "performance":"average",
                        "role":"CEO"
                    },
                    {
                        "name":"Jenny",
                        "salary":"50,000",
                        "performance":"below average",
                        "role":"Sales"
                    }
                ]
            }); // call calculateSumOfBonus function
        </script>            
    </body>
</html>
